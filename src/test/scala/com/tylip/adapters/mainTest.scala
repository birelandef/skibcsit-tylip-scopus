package com.tylip.adapters

//import com.tylip.adapters.scopus.ArticleRepository
import org.specs2.mutable._
import play.api.libs.json.{Json, JsValue}

/**
 * @author Sophie
 */

class mainTest extends Specification {
//
//  "Get oblect Article from json" should {
//    "corvert article with doi 10.1016/j.aap.2009.06.027" in {
//      val jsonStr = Json parse """{"full-text-retrieval-response":{"coredata":{"prism_url":"http://api.elsevier.com/content/article/pii:S0001457509001614","dc_identifier":"doi:10.1016/j.aap.2009.06.027","eid":"1-s2.0-S0001457509001614","prism_doi":"10.1016/j.aap.2009.06.027","pii":"S0001-4575(09)00161-4","dc_title":"Accident under-reporting among employees: Testing the moderating influence of psychological safety climate and supervisor enforcement of safety practices ","prism_publicationName":"Accident Analysis &amp; Prevention","prism_aggregationType":"Journal","prism_issn":"00014575","prism_volume":"42","prism_issueIdentifier":"5","prism_startingPage":"1438","prism_endingPage":"1444","prism_pageRange":"1438-1444","prism_number":"5","dc_format":"application/json","prism_coverDate":"2010-09-30","prism_coverDisplayDate":"September 2010","prism_copyright":"Copyright ?й 2009 Elsevier Ltd. All rights reserved.","prism_publisher":"Elsevier Ltd.","prism_issueName":"Safety Climate: New Developments in Conceptualization, Theory, and Research","dc_creator": [{"$" :"Huang, Yueng-Hsiang (Emily)"},{"$" :"Estrada, Armando X."}],"dc_description":"AbstractWe examined accident under-reporting with data from 425 employees employed in 5 industries with above average risk for employee injuries. We expected that rates for unreported accidents would be higher than rates for reported accidents; and that organizational safety climate and perceptions of supervisor enforcement of safety policies would moderate the relationship between unreported accidents and reported accidents. Results showed that the number of unreported accidents was significantly higher than the number of reported accidents. There was an average of 2.48 unreported accidents for every accident reported to the organization. Further, under-reporting was higher in working environments with poorer organizational safety climate or where supervisor safety enforcement was inconsistent. We discuss the implications of these findings for improving accident under-reporting and occupational safety in the workplace.","openaccess":"0","openaccessArticle":false,"openaccessType":null,"openArchiveArticle":false,"openaccessSponsorName":null,"openaccessSponsorType":null,"openaccessUserLicense":null,"dcterms_subject": [{"@_fa": "true", "$" :"Safety climate"},{"@_fa": "true", "$" :"Accident under-reporting"},{"@_fa": "true", "$" :"Supervisor enforcement"}],"link": [{"rel": "self", "href": "http://api.elsevier.com/content/article/pii:S0001457509001614", "@_fa": "true"},{"rel": "scidir", "href": "http://www.sciencedirect.com/science/article/pii/S0001457509001614", "@_fa": "true"}]},"scopus2id":"77955277031","scopus2eid":"2-s2.0-77955277031","pubmed-id":"20538099","link":{"rel": "abstract", "href": "http://api.elsevier.com/content/abstract/scopus_id:77955277031"},"originalText":{"xocs:doc":{"xocs:meta":{"xocs:open-access":{"xocs:oa-article-status":{"@is-open-access": "0", "@is-open-archive": "0"}}}}}}}"""
//      val article = ArticleRepository.getArticleByDOI("10.1016/j.aap.2009.06.027")
//
//      (
//        jsonStr \ "full-text-retrieval-response" \ "coredata" \ "prism_url"
//      ).as[String] mustEqual article.coredata1.prism_url
//    }
//    "corvert article with doi 10.1016/j.aap.2009.12.030" in {
//      val jsonStr = Json parse """{"full-text-retrieval-response":{"coredata":{"prism_url":"http://api.elsevier.com/content/article/pii:S0001457510000059","dc_identifier":"doi:10.1016/j.aap.2009.12.030","eid":"1-s2.0-S0001457510000059","prism_doi":"10.1016/j.aap.2009.12.030","pii":"S0001-4575(10)00005-9","dc_title":"Modelling fatigue and the use of fatigue models in work settings ","prism_publicationName":"Accident Analysis &amp; Prevention","prism_aggregationType":"Journal","pubType":"Review","prism_issn":"00014575","prism_volume":"43","prism_issueIdentifier":"2","prism_startingPage":"549","prism_endingPage":"564","prism_pageRange":"549-564","prism_number":"2","dc_format":"application/json","prism_coverDate":"2011-03-31","prism_coverDisplayDate":"March 2011","prism_copyright":"Copyright ?й 2010 Elsevier Ltd. All rights reserved.","prism_publisher":"Elsevier Ltd.","prism_issueName":"Advancing Fatigue and Safety Research","dc_creator": [{"$" :"J. Horrey, William"},{"$" :"Ian Noy, Y."},{"$" :"H?дrm?д, Mikko"},{"$" :"??kerstedt, Torbjorn"},{"$" :"Belenky, Gregory"}],"dc_description":"AbstractIn recent years, theoretical models of the sleep and circadian system developed in laboratory settings have been adapted to predict fatigue and, by inference, performance. This is typically done using the timing of prior sleep and waking or working hours as the primary input and the time course of the predicted variables as the primary output. The aim of these models is to provideemployers, unions and regulators with quantitative information on the likely average level of fatigue, or risk, associated with a given pattern of work and sleep with the goal of better managing the risk of fatigue-related errors and accidents/incidents. The first part of this review summarises the variables known to influence workplace fatigue and draws attention to the considerable variability attributable to individual and task variables not included in current models. The second part reviews the current fatigue models described in the scientific and technical literature and classifies them according to whether they predict fatigue directly by using the timing of prior sleep and wake (one-step models) or indirectlyby using work schedules to infer an average sleep-wake pattern that is then used to predict fatigue (two-step models). The third part of the review looks at the current use of fatigue models in field settings by organizations and regulators. Given their limitations it is suggested that the current generation of models may be appropriate for use as one element in a fatigue risk management system. The final section of the review looks at the future of these models and recommends a standardised approach for their use as an element of the ???defenses-in-depth??? approach to fatigue risk management.","openaccess":"0","openaccessArticle":false,"openaccessType":null,"openArchiveArticle":false,"openaccessSponsorName":null,"openaccessSponsorType":null,"openaccessUserLicense":null,"dcterms_subject": [{"@_fa": "true", "$" :"Fatigue"},{"@_fa": "true", "$" :"Bio-mathematical models"},{"@_fa": "true", "$" :"Sleep-wake cycle"},{"@_fa": "true", "$" :"Circadian rhythms"},{"@_fa": "true", "$" :"Shift work"},{"@_fa": "true", "$" :"Occupational health and safety"},{"@_fa": "true", "$" :"Safety management systems"},{"@_fa": "true", "$" :"Risk management"}],"link": [{"rel": "self", "href": "http://api.elsevier.com/content/article/pii:S0001457510000059", "@_fa": "true"},{"rel": "scidir", "href": "http://www.sciencedirect.com/science/article/pii/S0001457510000059", "@_fa": "true"}]},"scopus2id":"84876460916","scopus2eid":"2-s2.0-84876460916","link":{"rel": "abstract", "href": "http://api.elsevier.com/content/abstract/scopus_id:84876460916"},"originalText":{"xocs:doc":{"xocs:meta":{"xocs:open-access":{"xocs:oa-article-status":{"@is-open-access": "0", "@is-open-archive": "0"}}}}}}}"""
//      val article =   ArticleRepository.getArticleByDOI("10.1016/j.aap.2009.12.030")
//      (
//        jsonStr \ "full-text-retrieval-response" \ "coredata" \ "prism_url"
//      ).as[String] mustEqual article.coredata1.prism_url
//    }
//    "exception because such article not exist" in {
//      ArticleRepository.getArticleByDOI("10") must throwA[IllegalAccessException]
//      /*("Error retrieving article")*/
//    }
//  }
}